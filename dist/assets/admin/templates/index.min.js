!function(){const{registerPlugin:e}=wp.plugins,{__:l}=wp.i18n,{useCallback:t,useEffect:s}=wp.element,{useSelect:n,useDispatch:o}=wp.data,{PanelRow:a,SelectControl:c}=wp.components,{useDebounce:p}=wp.compose,{PluginDocumentSettingPanel:i}=wp.editPost||{},{used_post_types_for_templates:u}=window.lazyblocksTemplatesData||{};e("lazy-blocks-template",{render:function(){const{templatePostTypes:e,templateLock:m,templateBlocks:r,postTypes:b,blocks:_}=n((e=>{const{getEditedPostAttribute:l}=e("core/editor"),{getPostTypes:t}=e("core"),{getBlocks:s}=e("core/block-editor"),n=l("meta")||{};return{templatePostTypes:n._lzb_template_post_types||[],templateLock:n._lzb_template_lock||"",templateBlocks:n._lzb_template_blocks||"",postTypes:t({show_ui:!0,per_page:-1})||[],blocks:s()}}),[]),{editPost:g}=o("core/editor");function k(e,l){g({meta:{[e]:l}})}function y(e){const l=[];return e.forEach((e=>{const t=[e.name,e.attributes];e.innerBlocks&&e.innerBlocks.length&&t.push(y(e.innerBlocks)),l.push(t)})),l}const w=t(p((function(e,l){const t=encodeURIComponent(JSON.stringify(y(e)));l!==t&&k("_lzb_template_blocks",t)}),500),[]);s((()=>{w(_,r)}),[_,r]);const z=[{label:l("None","lazy-blocks"),value:""},{label:l("All - prevents all operations","lazy-blocks"),value:"all"},{label:l("Insert - prevents inserting new blocks, but allows moving existing ones","lazy-blocks"),value:"insert"},{label:l("Content Only - prevents all operations, except the content editing.","lazy-blocks"),value:"contentOnly"}],d=[],h=[];return b.filter((e=>e.viewable&&"lazyblocks"!==e.slug&&"lazyblocks_templates"!==e.slug&&"attachment"!==e.slug)).forEach((e=>{let{label:l}=e;e.labels&&e.labels.singular_name&&(l=e.labels.singular_name),h.push(e.slug),d.push({label:l,value:e.slug,disabled:u.includes(e.slug)})})),e&&e.length&&e.forEach((e=>{h.includes(e)||d.push({label:e,value:e})})),wp.element.createElement(i,{name:"LZBTemplateSettings",title:l("Template Settings","lazy-blocks"),className:"lzb-template-settings-panel"},wp.element.createElement(a,null,wp.element.createElement(c,{label:l("Post Types","lazy-blocks"),multiple:!0,options:d,value:e,onChange:e=>{k("_lzb_template_post_types",e)}})),wp.element.createElement(a,null,wp.element.createElement(c,{label:l("Template Lock","lazy-blocks"),options:z,value:m,onChange:e=>{k("_lzb_template_lock",e)}})))}})}();