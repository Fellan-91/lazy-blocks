(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,l=window.wp.plugins,s=window.wp.data,n=window.wp.components,o=window.wp.compose,a=window.wp.editPost,{used_post_types_for_templates:c}=window.lazyblocksTemplatesData||{};(0,l.registerPlugin)("lazy-blocks-template",{render:function(){const{templatePostTypes:l,templateLock:p,templateBlocks:i,postTypes:r,blocks:u}=(0,s.useSelect)((e=>{const{getEditedPostAttribute:t}=e("core/editor"),{getPostTypes:l}=e("core"),{getBlocks:s}=e("core/block-editor"),n=t("meta")||{};return{templatePostTypes:n._lzb_template_post_types||[],templateLock:n._lzb_template_lock||"",templateBlocks:n._lzb_template_blocks||"",postTypes:l({show_ui:!0,per_page:-1})||[],blocks:s()}}),[]),{editPost:b}=(0,s.useDispatch)("core/editor");function _(e,t){b({meta:{[e]:t}})}function m(e){const t=[];return e.forEach((e=>{const l=[e.name,e.attributes];e.innerBlocks&&e.innerBlocks.length&&l.push(m(e.innerBlocks)),t.push(l)})),t}const w=(0,e.useCallback)((0,o.useDebounce)((function(e,t){const l=encodeURIComponent(JSON.stringify(m(e)));t!==l&&_("_lzb_template_blocks",l)}),500),[]);(0,e.useEffect)((()=>{w(u,i)}),[u,i,w]);const g=[{label:(0,t.__)("None","lazy-blocks"),value:""},{label:(0,t.__)("All - prevents all operations","lazy-blocks"),value:"all"},{label:(0,t.__)("Insert - prevents inserting new blocks, but allows moving existing ones","lazy-blocks"),value:"insert"},{label:(0,t.__)("Content Only - prevents all operations, except the content editing.","lazy-blocks"),value:"contentOnly"}],k=[],d=[];return r.filter((e=>e.viewable&&"lazyblocks"!==e.slug&&"lazyblocks_templates"!==e.slug&&"attachment"!==e.slug)).forEach((e=>{let{label:t}=e;e.labels&&e.labels.singular_name&&(t=e.labels.singular_name),d.push(e.slug),k.push({label:t,value:e.slug,disabled:c.includes(e.slug)})})),l&&l.length&&l.forEach((e=>{d.includes(e)||k.push({label:e,value:e})})),(0,e.createElement)(a.PluginDocumentSettingPanel,{name:"LZBTemplateSettings",title:(0,t.__)("Template Settings","lazy-blocks"),className:"lzb-template-settings-panel"},(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%"}},(0,e.createElement)(n.SelectControl,{label:(0,t.__)("Post Types","lazy-blocks"),multiple:!0,options:k,value:l,onChange:e=>{_("_lzb_template_post_types",e)}}))),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%"}},(0,e.createElement)(n.SelectControl,{label:(0,t.__)("Template Lock","lazy-blocks"),options:g,value:p,onChange:e=>{_("_lzb_template_lock",e)}}))))}})})();